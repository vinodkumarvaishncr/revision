# File: azure-pipelines/templates/terraform-init.yml

parameters:
  path: '$(System.DefaultWorkingDirectory)'
  connectionName: 'connection_new'
  storageAccount: 'vinodmainstorage'
  containerName: 'vinodconatiner'
  key: 'kumarkey.tfstate'

steps:
  - task: TerraformInstaller@1
    displayName: "Install Terraform"
    inputs:
      terraformVersion: 'latest'

  - task: TerraformTask@5
    displayName: "Terraform Init"
    inputs:
      provider: 'azurerm'
      command: 'init'
      workingDirectory: ${{ parameters.path }}
      backendServiceArm: ${{ parameters.connectionName }}
      backendAzureRmStorageAccountName: ${{ parameters.storageAccount }}
      backendAzureRmContainerName: ${{ parameters.containerName }}
      backendAzureRmKey: ${{ parameters.key }}